<mxfile host="app.diagrams.net">
  <diagram name="Snowflake Optimization Decision Flow">
    <mxGraphModel dx="1000" dy="800" grid="1" gridSize="10">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Nodes -->
        <mxCell id="A" value="Open Query Profile"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;"
          vertex="1" parent="1">
          <mxGeometry x="360" y="20" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="B" value="Where is most time spent"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;"
          vertex="1" parent="1">
          <mxGeometry x="340" y="110" width="300" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="C" value="CPU processing high"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;"
          vertex="1" parent="1">
          <mxGeometry x="80" y="210" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="D" value="Table scan or IO dominant"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="210" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="E" value="Is pruning effective"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="310" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="F" value="Accept cost data volume required"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="410" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="G" value="Consider clustering"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;"
          vertex="1" parent="1">
          <mxGeometry x="760" y="410" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="H" value="Filters selective on fact table"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="510" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="I" value="Consider SOS"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;"
          vertex="1" parent="1">
          <mxGeometry x="80" y="610" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="J" value="SOS not useful"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="610" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="K" value="CPU bound or high concurrency"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="710" width="320" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="L" value="Consider QAS"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;"
          vertex="1" parent="1">
          <mxGeometry x="80" y="810" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="M" value="Accept cost IO bound workload"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="810" width="320" height="60" as="geometry"/>
        </mxCell>

        <!-- Edges with labels -->
        <mxCell id="e1" edge="1" parent="1" source="A" target="B">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" edge="1" parent="1" source="B" target="C" value="CPU">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" edge="1" parent="1" source="B" target="D" value="SCAN">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" edge="1" parent="1" source="D" target="E">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" edge="1" parent="1" source="E" target="F" value="YES">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e6" edge="1" parent="1" source="E" target="G" value="NO">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e7" edge="1" parent="1" source="F" target="H">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e8" edge="1" parent="1" source="H" target="I" value="YES">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e9" edge="1" parent="1" source="H" target="J" value="NO">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e10" edge="1" parent="1" source="J" target="K">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e11" edge="1" parent="1" source="K" target="L" value="YES">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e12" edge="1" parent="1" source="K" target="M" value="NO">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
